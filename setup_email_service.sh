#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–Ω–µ—à–Ω–µ–≥–æ SMTP —Å–µ—Ä–≤–∏—Å–∞
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –ø–æ—á—Ç—ã —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ SMTP —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è AGB SERVICE"
echo "=================================================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤
echo "üì° –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–æ–≤..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ä—Ç 443 (HTTPS) - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω
if timeout 5 bash -c "</dev/tcp/google.com/443" 2>/dev/null; then
    echo "‚úÖ –ü–æ—Ä—Ç 443 (HTTPS) –¥–æ—Å—Ç—É–ø–µ–Ω"
else
    echo "‚ùå –ü–æ—Ä—Ç 443 (HTTPS) –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ä—Ç 80 (HTTP) - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω
if timeout 5 bash -c "</dev/tcp/google.com/80" 2>/dev/null; then
    echo "‚úÖ –ü–æ—Ä—Ç 80 (HTTP) –¥–æ—Å—Ç—É–ø–µ–Ω"
else
    echo "‚ùå –ü–æ—Ä—Ç 80 (HTTP) –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º SMTP –ø–æ—Ä—Ç—ã
echo ""
echo "üìß –ü—Ä–æ–≤–µ—Ä–∫–∞ SMTP –ø–æ—Ä—Ç–æ–≤..."

for port in 25 465 587; do
    if timeout 5 bash -c "</dev/tcp/smtp.mail.ru/$port" 2>/dev/null; then
        echo "‚úÖ –ü–æ—Ä—Ç $port –¥–æ—Å—Ç—É–ø–µ–Ω"
    else
        echo "‚ùå –ü–æ—Ä—Ç $port –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
    fi
done

echo ""
echo "üõ†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º—ã:"
echo "====================================="
echo ""
echo "üá∑üá∫ –†–û–°–°–ò–ô–°–ö–ò–ï –°–ï–†–í–ò–°–´ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):"
echo "1. üìß Mail.ru Cloud Solutions:"
echo "   - –°–∞–π—Ç: https://mcs.mail.ru/"
echo "   - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: –¥–æ 1000 –ø–∏—Å–µ–º/–º–µ—Å—è—Ü"
echo "   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞: MAILRU_API_KEY + MAILRU_DOMAIN"
echo ""
echo "2. üìß Yandex.Cloud Mail API:"
echo "   - –°–∞–π—Ç: https://cloud.yandex.ru/services/mail"
echo "   - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: –¥–æ 1000 –ø–∏—Å–µ–º/–º–µ—Å—è—Ü"
echo "   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞: YANDEX_API_KEY + YANDEX_DOMAIN"
echo ""
echo "3. üìß Unisender:"
echo "   - –°–∞–π—Ç: https://www.unisender.com/"
echo "   - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: –¥–æ 100 –ø–∏—Å–µ–º/–¥–µ–Ω—å"
echo "   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞: UNISENDER_API_KEY"
echo ""
echo "4. üìß SendPulse:"
echo "   - –°–∞–π—Ç: https://sendpulse.com/"
echo "   - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: –¥–æ 15000 –ø–∏—Å–µ–º/–º–µ—Å—è—Ü"
echo "   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞: SENDPULSE_API_KEY + SENDPULSE_SECRET"
echo ""
echo "üåç –ó–ê–†–£–ë–ï–ñ–ù–´–ï –°–ï–†–í–ò–°–´:"
echo "1. üìß SendGrid (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 100 –ø–∏—Å–µ–º/–¥–µ–Ω—å)"
echo "2. üìß Mailgun (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 10,000 –ø–∏—Å–µ–º/–º–µ—Å—è—Ü)"
echo "3. üìß Amazon SES (–æ—á–µ–Ω—å –¥–µ—à–µ–≤–æ)"
echo ""
echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:"
echo "   export MAILRU_API_KEY='your_mailru_key'"
echo "   export MAILRU_DOMAIN='your_domain.mail.ru'"
echo "   export YANDEX_API_KEY='your_yandex_key'"
echo "   export UNISENDER_API_KEY='your_unisender_key'"
echo "   export SENDPULSE_API_KEY='your_sendpulse_key'"
echo "   export SENDPULSE_SECRET='your_sendpulse_secret'"
echo ""
echo "3. üåê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ –∏–ª–∏ VPN:"
echo "   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π"
echo "   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPN –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫"
echo ""
echo "4. üìû –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É:"
echo "   - –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–æ—Ä—Ç–æ–≤ 25, 465, 587"
echo "   - –£–∑–Ω–∞—Ç—å –æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö SMTP —Å–µ—Ä–≤–µ—Ä–∞—Ö"
echo ""
echo "5. üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:"
echo "   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å"
echo "   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä"
echo "   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—á—Ç—ã"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
echo "üìã –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—á—Ç—ã:"
echo "============================"
echo "MAIL_FROM: ${MAIL_FROM:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "MAIL_SERVER: ${MAIL_SERVER:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "MAIL_PORT: ${MAIL_PORT:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "MAIL_USERNAME: ${MAIL_USERNAME:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo ""
echo "üá∑üá∫ –†–æ—Å—Å–∏–π—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã:"
echo "MAILRU_API_KEY: ${MAILRU_API_KEY:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "MAILRU_DOMAIN: ${MAILRU_DOMAIN:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "YANDEX_API_KEY: ${YANDEX_API_KEY:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "YANDEX_DOMAIN: ${YANDEX_DOMAIN:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "UNISENDER_API_KEY: ${UNISENDER_API_KEY:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "SENDPULSE_API_KEY: ${SENDPULSE_API_KEY:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo ""
echo "üåç –ó–∞—Ä—É–±–µ–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:"
echo "SENDGRID_API_KEY: ${SENDGRID_API_KEY:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "MAILGUN_API_KEY: ${MAILGUN_API_KEY:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo "MAILGUN_DOMAIN: ${MAILGUN_DOMAIN:-'–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'}"
echo ""

echo "üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "=================="
echo "1. üá∑üá∫ –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ Mail.ru Cloud Solutions"
echo "2. –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞"
echo "3. –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è"
echo "4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: docker-compose restart agregator-backend"
echo ""
echo "‚≠ê –õ–£–ß–®–ò–ô –í–´–ë–û–†: Mail.ru Cloud Solutions"
echo "   - –í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å –≤ –†–æ—Å—Å–∏–∏"
echo "   - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 1000 –ø–∏—Å–µ–º/–º–µ—Å—è—Ü"
echo "   - –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞"
echo ""

echo "‚úÖ –°–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!"
